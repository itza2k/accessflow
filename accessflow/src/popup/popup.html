<!DOCTYPE html>
<html>
<head>
  <title>AccessFlow</title>
  <meta charset="UTF-8">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../utils/compatibility.css">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="accessflow-popup">
    <header class="accessflow-header">
      <div class="logo-container">
        <img src="../icons/icon48.png" alt="AccessFlow Logo" class="accessflow-logo">
        <h1>AccessFlow</h1>
      </div>
      <div class="mode-toggle">
        <input type="checkbox" id="dark-mode-toggle" class="toggle-checkbox">
        <label for="dark-mode-toggle" class="toggle-label">
          <span class="toggle-inner"></span>
          <span class="toggle-switch"></span>
        </label>
      </div>
    </header>
    
    <nav class="accessflow-tabs">
      <div class="accessflow-tab active" data-tab="process">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M14 3v2H4v13.385L5.763 17H20v-7h2v8a1 1 0 0 1-1 1H6.455L2 22.5V4a1 1 0 0 1 1-1h11zm5 0V0l5 5h-4v3h-2V5h-2V3h3z"/></svg>
        Process Text
      </div>
      <div class="accessflow-tab" data-tab="settings">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3.34 17a10.018 10.018 0 0 1-.978-2.326 3 3 0 0 0 .002-5.347A9.99 9.99 0 0 1 4.865 4.99a3 3 0 0 0 4.631-2.674 9.99 9.99 0 0 1 5.007.002 3 3 0 0 0 4.632 2.672c.579.59 1.093 1.261 1.525 2.01.433.749.757 1.53.978 2.326a3 3 0 0 0-.002 5.347 9.99 9.99 0 0 1-2.501 4.337 3 3 0 0 0-4.631 2.674 9.99 9.99 0 0 1-5.007-.002 3 3 0 0 0-4.632-2.672A10.018 10.018 0 0 1 3.34 17zm5.66.196a4.993 4.993 0 0 1 2.25 2.77c.499.047 1 .048 1.499.001A4.993 4.993 0 0 1 15 17.197a4.993 4.993 0 0 1 3.525-.565c.29-.408.54-.843.748-1.298A4.993 4.993 0 0 1 18 12c0-1.26.47-2.437 1.273-3.334a8.126 8.126 0 0 0-.75-1.298A4.993 4.993 0 0 1 15 6.804a4.993 4.993 0 0 1-2.25-2.77c-.499-.047-1-.048-1.499-.001A4.993 4.993 0 0 1 9 6.803a4.993 4.993 0 0 1-3.525.565 7.99 7.99 0 0 0-.748 1.298A4.993 4.993 0 0 1 6 12c0 1.26-.47 2.437-1.273 3.334a8.126 8.126 0 0 0 .75 1.298A4.993 4.993 0 0 1 9 17.196zM12 15a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>
        Settings
      </div>
      <div class="accessflow-tab" data-tab="help">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.5 3.5 0 1 1 13 13.355z"/></svg>
        Help
      </div>
    </nav>
    
    <div class="accessflow-content">
      <!-- Process Text Section -->
      <div id="process-section" class="accessflow-section active">
        <div id="api-key-missing" class="notice warning" style="display:none;">
          <div class="notice-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm0-8h2v6h-2V7z"/></svg>
          </div>
          <div class="notice-content">
            <p>Please set your Gemini API key in the Settings tab before using AccessFlow.</p>
            <button id="goto-settings" class="accessflow-button">Go to Settings</button>
          </div>
        </div>
        
        <div id="process-controls">
          <p class="section-label">Input Text</p>
          <div class="input-container">
            <textarea id="input-text" aria-label="Enter text to process" placeholder="Paste text here or select text on any webpage and use the right-click menu."></textarea>
          </div>
          
          <div class="controls">
            <button id="simplify-btn" class="process-button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M13 16.172l-3.536-3.536 1.415-1.414 2.12 2.122 5.657-5.657 1.414 1.414L13 16.172zM12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"/></svg>
              Simplify
            </button>
            <button id="summarize-btn" class="process-button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z"/></svg>
              Summarize
            </button>
          </div>
          
          <div id="output-container" class="output-container">
            <p class="section-label">Output</p>
            <div id="output-text" aria-live="polite" class="output"></div>
            <div id="key-concepts" aria-label="Key concepts" class="key-concepts"></div>
          </div>
        </div>
      </div>
      
      <!-- Settings Section -->
      <div id="settings-section" class="accessflow-section">
        <div id="settings-container">
          <!-- Settings will be populated by JS -->
          <div class="accessflow-loading"></div>
        </div>
      </div>
      
      <!-- Help Section -->
      <div id="help-section" class="accessflow-section">
        <h2>How to Use AccessFlow</h2>
        <div class="help-card">
          <div class="help-icon">1</div>
          <div class="help-content">
            <h3>Select Text</h3>
            <p>Select any text on a webpage that you want to process.</p>
          </div>
        </div>
        <div class="help-card">
          <div class="help-icon">2</div>
          <div class="help-content">
            <h3>Process Text</h3>
            <p>Right-click and select "Process with AccessFlow" or use keyboard shortcut Ctrl+Shift+A.</p>
          </div>
        </div>
        <div class="help-card">
          <div class="help-icon">3</div>
          <div class="help-content">
            <h3>Choose Action</h3>
            <p>Click "Simplify" or "Summarize" to process the text using Gemini AI.</p>
          </div>
        </div>
        <div class="help-card">
          <div class="help-icon">4</div>
          <div class="help-content">
            <h3>Explore Features</h3>
            <p>Use "Read Aloud" to hear the text or click on key concepts to get explanations.</p>
          </div>
        </div>
        
        <h3>Keyboard Shortcuts</h3>
        <ul class="keyboard-shortcuts">
          <li><span class="shortcut">Ctrl+Shift+A</span> Process selected text</li>
          <li><span class="shortcut">Alt+S</span> Simplify text</li>
          <li><span class="shortcut">Alt+M</span> Summarize text</li>
          <li><span class="shortcut">Alt+R</span> Read text aloud</li>
        </ul>
        
        <div class="version-info">
          <p>AccessFlow v1.0</p>
          <a href="https://github.com/yourusername/accessflow" target="_blank">View on GitHub</a>
        </div>
      </div>
    </div>
  </div>
  
  <script src="popup.js" type="module"></script>
</body>
</html>